\begingroup
\begin{figure}[!p]
\centering
\beginpgfgraphicnamed{afigure-external}
\begin{tikzpicture}[baseline,trim axis left,trim axis right]
\begin{axis}[xlabel=$t$,ylabel=$v$]

  \addplot[smooth,mark=*,blue]
    plot coordinates { (0,2) (2,3) (3,1) };
  \addlegendentry{Case 1}

  \addplot[smooth,color=red,mark=x]
    plot coordinates { (0,0) (1,1) (2,1) (3,2) };
  \addlegendentry{Case 2}

\end{axis}
\end{tikzpicture}
\endpgfgraphicnamed
\caption{%
  \label{fig:afigure}%
  A figure from \href{http://www.texample.net/tikz/examples/pgfplots/}{\TeX ample.net}.%
}
\end{figure}
\endgroup
